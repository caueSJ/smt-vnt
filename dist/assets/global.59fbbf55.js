const w=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}};w();var v=`header{display:flex;background:linear-gradient(to right,var(--pink),var(--purple));color:var(--white);align-items:center;justify-content:space-between;padding:10px;gap:5px;position:relative;box-shadow:0 1px 2px 0 var(--box-shadow)}@media (min-width: 576px){header{padding:10px 50px}}header .header-brand a{display:flex;align-items:center;column-gap:20px;text-decoration:none;color:inherit}header .header-brand a h1{font-size:1.25rem;font-weight:600}header .logo{width:48px;height:48px}header .header-user{display:flex;align-items:center;column-gap:10px}header .header-user span{font-weight:600}header .header-user .name{display:none}@media (min-width: 576px){header .header-user .name{display:flex}}header .header-user div{width:42px;height:42px;border-radius:50%;background:var(--white);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:1.2rem;font-weight:700;color:var(--black)}
`;const F={DELETE:"delete",SHARE:"share"},b={0:1,1:-1,"-1":0},U={0:"fa-sort",1:"fa-sort-up","-1":"fa-sort-down"},T={REAL:"real",FANTASY:"fantasy"},x="https://v3.football.api-sports.io",L={"x-rapidapi-key":"84be6e8e56c4c34d36cf2c3eb67325d9","x-rapidapi-host":"v3.football.api-sports.io"},S=()=>new Date().getFullYear(),j=t=>t.charAt(0).toUpperCase()+t.slice(1),d=t=>t.charAt(0).toUpperCase(),p=t=>{if(!t)return"";const e=t.split(" ");return e.length===1?d(e[0]):d(e[0])+d(e[e.length-1])},E=t=>{const e=t.split("&"),s={};for(let a=0;a<e.length;a++){const r=e[a].split("="),n=decodeURIComponent(r.shift()),o=decodeURIComponent(r.join("="));if(typeof s[n]=="undefined")s[n]=o;else if(typeof s[n]=="string"){const i=[s[n],o];s[n]=i}else s[n].push(o)}return s},q=()=>{const t=window.location.search.slice(1);return t?E(t):{}},m=t=>$.ajax({url:`${x}/${t}`,method:"GET",timeout:0,headers:L});class I extends HTMLElement{constructor(){super(),this.build()}static get observedAttributes(){return["user-name"]}build(){const e=this.attachShadow({mode:"open"});e.appendChild(this.styles()),e.appendChild(this.createHTMLComponent().content)}styles(){const e=document.createElement("style");return e.textContent=v,e}createHTMLComponent(){const e=this.hasAttribute("user-name")?this.getAttribute("user-name"):"John Doe",s=document.createElement("template");return s.innerHTML=`
        <header>
            <div class="header-brand">
                <a href="/">
                    <img class="logo" src="./logo-vnt.svg" />
                    <h1>Squad Managment Tool</h1>
                </a>
            </div>
            <div class="header-user">
                <span class="name">${e}</span>
                <div title="User Profile Picture">
                    <span>${p(e)}</span>
                </div>
            </div>
        </header>
        `,s}attributeChangedCallback(e,s,a){s!==a&&e==="user-name"&&this.updateName(a)}updateName(e){const s=this.shadowRoot;s.querySelector(".header-user > span").textContent=e,s.querySelector(".header-user > div > span").textContent=p(e)}}customElements.define("cmp-header",I);var C=`footer{height:50px;background:var(--bg-gray-dark);display:flex;justify-content:center;align-items:center;font-size:.9375rem}
`;class O extends HTMLElement{constructor(){super(),this.build()}build(){const e=this.attachShadow({mode:"open"});e.appendChild(this.styles()),e.appendChild(this.createHTMLComponent().content)}styles(){const e=document.createElement("style");return e.textContent=C,e}createHTMLComponent(){const e=document.createElement("template");return e.innerHTML=`
        <footer>
            <p>${S()} - All rights reserved</p>
        </footer>
        `,e}}customElements.define("cmp-footer",O);const A=t=>{const e=JSON.stringify(t);localStorage.setItem("smt-players",e)},u=()=>{const t=localStorage.getItem("smt-players");return t?JSON.parse(t):[]},g=t=>{const e=localStorage.getItem("smt-players");return e&&JSON.parse(e).find(r=>r.id===t)||null},_=t=>t.trim()?u().filter(a=>a.name.toLowerCase().indexOf(t.toLowerCase())!==-1):u(),P=async t=>{let e=u();if(e.length>0)return{players:e,playersTeam:[]};e=[];const s=[];return(await h(t)).forEach(r=>{e.push({id:r.player.id,name:r.player.name,nationality:r.player.nationality,age:r.player.age,photo:r.player.photo}),s.push({playerId:r.player.id,teamId:r.statistics[0].team.id})}),{players:e,playersTeam:s}},h=async(t,e=1,s=[])=>{const a=await N(t,e);return s=s.concat(a.response),a.paging.current<a.paging.total&&(s=await h(t,a.paging.current+1,s)),s},N=async(t,e)=>await m(`players?league=${t.league.id}&season=${t.seasons[0].year}&page=${e}`),B=t=>{const e={};t.forEach(r=>{r.players.forEach(n=>{e.hasOwnProperty(n)||(e[n]=0),e[n]++})});const s=[];return Object.keys(e).forEach(r=>{const n=g(+r),o=parseInt(e[r]/t.length*100)+"%";s.push({player:{name:n.name,initials:p(n.name),photo:n.photo},picks:e[r],percentage:o})}),s},l=t=>{const e=JSON.stringify(t);localStorage.setItem("smt-teams",e)},c=()=>{const t=localStorage.getItem("smt-teams");return t?JSON.parse(t):[]},D=t=>{const e=localStorage.getItem("smt-teams");return e&&JSON.parse(e).find(r=>r.id===t)||null},z=t=>{const s=c().filter(a=>a.id!==t);l(s)},f=()=>{const t=localStorage.getItem("smt-teams-big-id");return t?+t:0},y=t=>{const e=f();t>e&&localStorage.setItem("smt-teams-big-id",t)},k=()=>{const e=f()+1;return y(e),e},W=t=>{const e=k();t.id=e;const a=[...c(),t];return l(a),e},Y=t=>{const a=[...c().filter(r=>r.id!==t.id),t];l(a)},R=async(t,e)=>{let s=c();return s.length>0||(s=[],(await m(`teams?league=${t.league.id}&season=${t.seasons[0].year}`)).response.forEach(r=>{const n=e.map(i=>i.teamId===r.team.id?i.playerId:null).filter(i=>i!==null),o=`http://${r.team.name.replaceAll(" ","-").toLowerCase()}.com`;s.push({id:r.team.id,name:r.team.name,description:`${r.team.name} Squad`,website:o,type:T.REAL,players:n.slice(0,11),tags:[]}),y(r.team.id)})),s},G=(t,e)=>{const s=c(),a=b[e];return s.slice().sort((n,o)=>{if(a===0)return 0;if(a===1)return n[t].localeCompare(o[t]);if(a===-1)return o[t].localeCompare(n[t])})},K=t=>{const e=[];return t.filter(s=>s.players.length>0).forEach(s=>{let a=0,r=0;s.players.forEach(o=>{a+=g(o).age,r++});const n=(a/r).toLocaleString("en-US",{maximumFractionDigits:1});e.push({team:{id:s.id,name:s.name},avg:n})}),e},M=()=>{const t=localStorage.getItem("smt-league");return t?JSON.parse(t):null},H=t=>{const e=JSON.stringify(t);localStorage.setItem("smt-league",e)},J=async()=>{let t=M();return t||(t=(await m("leagues?country=Brazil&last=1")).response[0],t)};window.addEventListener("load",async t=>{const e=await J(),s=await P(e),a=await R(e,s.playersTeam);H(e),A(s.players),l(a),document.querySelector(".loading").remove();const r=new CustomEvent("resourcesLoaded");window.dispatchEvent(r)});export{F as A,U as O,b as a,p as b,_ as c,j as d,g as e,q as f,c as g,Y as h,W as i,D as j,B as p,z as r,G as s,K as t};
